(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{268:function(_,t,v){"use strict";v.r(t);var e=v(38),r=Object(e.a)({},function(){var _=this,t=_.$createElement,v=_._self._c||t;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("h1",{attrs:{id:"高级部署指南"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#高级部署指南","aria-hidden":"true"}},[_._v("#")]),_._v(" 高级部署指南")]),_._v(" "),v("p",[_._v("如果你有以下的情况：")]),_._v(" "),v("ul",[v("li",[_._v("希望使用自己的 VPS 或云服务器进行部署。")]),_._v(" "),v("li",[_._v("需要针对你所在城市的 IFS 活动有额外需求，且对 JavaScript、Node.js 等语言有开发经验。")])]),_._v(" "),v("p",[_._v("那么，你可以尝试此指南中的方式，进行自己部署。")]),_._v(" "),v("h2",{attrs:{id:"通过-git-下载代码并部署"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#通过-git-下载代码并部署","aria-hidden":"true"}},[_._v("#")]),_._v(" 通过 Git 下载代码并部署")]),_._v(" "),v("p",[_._v("如果你想在 VPS 或者云服务器中部署 IFS RSVP Bot，那么通过 Git 下载代码是一个比较合适的方式。")]),_._v(" "),v("p",[_._v("在开始之前，请确保你的 VPS 已经安装 Node.js 环境和 Git 程序。同时，你需要拥有一个域名，并有相关的 HTTP 服务器程序（比如 Nginx 或是 Apache）。")]),_._v(" "),v("ol",[v("li",[_._v("使用 "),v("code",[_._v("git clone https://github.com/Astrian/IFS-RSVP-Bot")]),_._v(" 指令下载（克隆）代码")]),_._v(" "),v("li",[_._v("使用 "),v("code",[_._v("npm install")]),_._v(" 来安装依赖")]),_._v(" "),v("li",[_._v("使用 "),v("code",[_._v("node app.js")]),_._v(" 或 "),v("code",[_._v("pm2 start app.js")]),_._v("（若你安装了 pm2）来启动 bot 程序")])]),_._v(" "),v("p",[_._v("注意，如果你 fork 并修改了代码，在第一步时，请将后面的地址改为 fork 后的 repo 地址。")]),_._v(" "),v("p",[_._v("配置环境变量。你需要配置这些变量：")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("TELEGRAM_TOKEN")]),_._v("：找 "),v("a",{attrs:{href:"https://t.me/botfather",target:"_blank",rel:"noopener noreferrer"}},[_._v("BotFather"),v("OutboundLink")],1),_._v(" 建立 bot 时，他会返回给你一个形如 "),v("code",[_._v("123456:1234567890ABCDEFGabcefg")]),_._v(" 的密钥，将它填在这个变量里。")]),_._v(" "),v("li",[v("code",[_._v("DOMAIN")]),_._v("：你的域名，必须 HTTPS 开头，最后不能留有 "),v("code",[_._v("/")]),_._v("。")]),_._v(" "),v("li",[v("code",[_._v("RANDOM_ADDRESS")]),_._v("：以 "),v("code",[_._v("/")]),_._v(" 开头的随机字符串，建议只有数字和英文字符，万不可有第二个 "),v("code",[_._v("/")]),_._v("。你可以用 1Password 生成一个。")]),_._v(" "),v("li",[v("code",[_._v("AIRTABLE_TOKEN")]),_._v("：你的 Airtable 帐户 API 密钥。")]),_._v(" "),v("li",[v("code",[_._v("‌BASE_ID")]),_._v("：对应 Airtable 的 base ID。")]),_._v(" "),v("li",[v("code",[_._v("IFS_INFO")]),_._v("：IFS 场次信息 JSON。")]),_._v(" "),v("li",[v("code",[_._v("PORT")]),_._v("：bot 可以占用的端口号。")])]),_._v(" "),v("p",[_._v("如果你不知道以上环境变量该如何填写，请参照 "),v("a",{attrs:{href:"/zh-cn/QuickDeployGuide"}},[_._v("快速部署指南")]),_._v(" 中的说明，这里不再赘述。")]),_._v(" "),v("p",[_._v("在 HTTP 服务器程序中，配置指向 "),v("code",[_._v("127.0.0.1:<env.PORT>")]),_._v(" 的反向代理。")]),_._v(" "),v("p",[_._v("记得配置 SSL 证书和 HTTPS 相关设置，因为 Telegram 要求 bot 服务器必须使用 HTTPS 才能发送指令。建议使用 "),v("a",{attrs:{href:"https://certbot.org",target:"_blank",rel:"noopener noreferrer"}},[_._v("Certbot"),v("OutboundLink")],1),_._v("。")])])},[],!1,null,null,null);t.default=r.exports}}]);