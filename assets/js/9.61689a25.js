(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{289:function(t,_,v){"use strict";v.r(_);var e=v(38),o=Object(e.a)({},function(){var t=this,_=t.$createElement,v=t._self._c||_;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"高级部署指南"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#高级部署指南","aria-hidden":"true"}},[t._v("#")]),t._v(" 高级部署指南")]),t._v(" "),v("p",[t._v("如果你有以下的情况：")]),t._v(" "),v("ul",[v("li",[t._v("希望使用自己的 VPS 或云服务器进行部署。")]),t._v(" "),v("li",[t._v("需要针对你所在城市的 IFS 活动有额外需求，且对 JavaScript、Node.js 等语言有开发经验。")])]),t._v(" "),v("p",[t._v("那么，你可以尝试此指南中的方式，进行自己部署。")]),t._v(" "),v("h2",{attrs:{id:"通过-git-下载代码并部署"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#通过-git-下载代码并部署","aria-hidden":"true"}},[t._v("#")]),t._v(" 通过 Git 下载代码并部署")]),t._v(" "),v("p",[t._v("如果你想在 VPS 或者云服务器中部署 IFS RSVP Bot，那么通过 Git 下载代码是一个比较合适的方式。")]),t._v(" "),v("p",[t._v("在开始之前，请确保你的 VPS 已经安装 Node.js 环境和 Git 程序。同时，你需要拥有一个域名，并有相关的 HTTP 服务器程序（比如 Nginx 或是 Apache）。")]),t._v(" "),v("ol",[v("li",[t._v("使用 "),v("code",[t._v("git clone https://github.com/Astrian/IFS-RSVP-Bot")]),t._v(" 指令下载（克隆）代码")]),t._v(" "),v("li",[t._v("使用 "),v("code",[t._v("npm install")]),t._v(" 来安装依赖")]),t._v(" "),v("li",[t._v("使用 "),v("code",[t._v("node app.js")]),t._v(" 或 "),v("code",[t._v("pm2 start app.js")]),t._v("（若你安装了 pm2）来启动 bot 程序")])]),t._v(" "),v("div",{staticClass:"warning custom-block"},[v("p",{staticClass:"custom-block-title"},[t._v("如果我 fork 并修改了代码")]),t._v(" "),v("p",[t._v("在第一步，请将后面的仓库地址改为 fork 后的 repo 地址。")])]),t._v(" "),v("p",[t._v("配置环境变量。你需要配置这些变量：")]),t._v(" "),v("ul",[v("li",[v("code",[t._v("TELEGRAM_TOKEN")]),t._v("：找 "),v("a",{attrs:{href:"https://t.me/botfather",target:"_blank",rel:"noopener noreferrer"}},[t._v("BotFather"),v("OutboundLink")],1),t._v(" 建立 bot 时，他会返回给你一个形如 "),v("code",[t._v("123456:1234567890ABCDEFGabcefg")]),t._v(" 的密钥，将它填在这个变量里。")]),t._v(" "),v("li",[v("code",[t._v("DOMAIN")]),t._v("：你的域名，必须 HTTPS 开头，最后不能留有 "),v("code",[t._v("/")]),t._v("。")]),t._v(" "),v("li",[v("code",[t._v("RANDOM_ADDRESS")]),t._v("：以 "),v("code",[t._v("/")]),t._v(" 开头的随机字符串，建议只有数字和英文字符，万不可有第二个 "),v("code",[t._v("/")]),t._v("。你可以用 1Password 生成一个。")]),t._v(" "),v("li",[v("code",[t._v("AIRTABLE_TOKEN")]),t._v("：你的 Airtable 帐户 API 密钥。")]),t._v(" "),v("li",[v("code",[t._v("‌BASE_ID")]),t._v("：对应 Airtable 的 base ID。")]),t._v(" "),v("li",[v("code",[t._v("IFS_INFO")]),t._v("：IFS 场次信息 JSON。")]),t._v(" "),v("li",[v("code",[t._v("PORT")]),t._v("：bot 可以占用的端口号。")])]),t._v(" "),v("p",[t._v("如果你不知道以上环境变量该如何填写，请参照 "),v("a",{attrs:{href:"/zh-cn/QuickDeployGuide"}},[t._v("快速部署指南")]),t._v(" 中的说明，这里不再赘述。")]),t._v(" "),v("p",[t._v("在 HTTP 服务器程序中，配置指向 "),v("code",[t._v("127.0.0.1:<env.PORT>")]),t._v(" 的反向代理。")]),t._v(" "),v("p",[t._v("记得配置 SSL 证书和 HTTPS 相关设置，因为 Telegram 要求 bot 服务器必须使用 HTTPS 才能发送指令。建议使用 "),v("a",{attrs:{href:"https://certbot.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("Certbot"),v("OutboundLink")],1),t._v("。")])])},[],!1,null,null,null);_.default=o.exports}}]);